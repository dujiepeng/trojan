# Changelog

## [v1.3.8] - 2025-12-24
### 修改内容
- **恢复并固化 Web 面板**：重新集成了 `web/templates` 下的前端编译产物。项目现在内置了完整的 Web UI，不再依赖外部构建，确保 Web 功能开箱即用且永久可用。
- **完成全面本地化**：至此，后端关键组件（acme, systemctl）与前端 UI 已全部完成本地化。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.3.8

## [v1.3.7] - 2025-12-24
### 修改内容
- **清理冗余资源**：删除了 `web/templates` 下的手动恢复的前端静态资源。项目将不再维持独立的前端页面，Web 面板暂以 404 为准。
- **保持核心本地化**：继续保留 `acme.sh` 和 `systemctl` 适配脚本的本地化，确保后端关键组件的自足性。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.3.7

## [v1.3.6] - 2025-12-24
### 修改内容
- **外部依赖全本地化**：
  - 找回并集成了 `web/templates` 下的前端编译资源。
  - 将 `acme.sh.sh` 和 `systemctl.py` 脚本同步至 `asset/` 目录并使用 `go:embed` 嵌入。
  - 修改 `util/command.go` 和 `trojan/install.go`，将原有的在线 `curl` 下载改为读取内置资源，确保项目自足性。
- **同步上游代码**：对比并确认了当前 Go 业务逻辑与 `imud/trojan` 保持一致，保留了本地的仓库地址修正。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.3.6

## [v1.3.5] - 2025-12-24
### 修改内容
- **更新项目总结**：完善了 `Summary.md`，增加了对前端资源现状（文件缺失但源码可考）的分析，明确了当前 Web 面板不可用的根本原因。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.3.5

## [v1.3.4] - 2025-12-24
### 修改内容
- **恢复 Web 控制面板**：通过从 `Jrohy/trojan-web` 源码编译，找回并集成了完整的 `index.html` 和 `static`资源。现在 Web 页面可以正常显示登录框和配置界面。
- **修复安装脚本**：修正了 `install.sh` 中的 `service_url` 引用的仓库地址，确保其指向当前的 Fork 仓库。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.3.4

## [v1.3.0] - 2025-12-24
### 修改内容
- 修复 `go:embed` 的编译错误：Go 编译器不允许嵌入只包含 `.gitkeep` 的空目录。通过在 `web/templates/static` 中添加实际文件解决了该问题。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.3.0

## [v1.2.9] - 2025-12-24
### 修改内容
- 集成 GitHub Actions 自动化发布流程：现在只需推送以 `v` 开头的版本标签，系统将自动完成 amd64 和 arm64 二进制文件的编译，并发布到 GitHub Releases。
- 修复并优化了 Release 构建参数，支持在程序中显示正确的版本号。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.9

## [v1.2.8] - 2025-12-24
### 修改内容
- 修复 `util/command.go` 中的 `RunWebShell` 函数，增加网络请求失败时的错误处理，防止程序发生空指针崩溃（Panic）。
- 解决由于缺少 `web/templates` 目录导致 `go build` 编译失败的问题。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.8

## [v1.2.7] - 2025-12-24
### 修改内容
- 修复 `trojan/install.go` 中的 Docker 安装源，切换为官方 `get.docker.com`，解决 Ubuntu 等系统下的安装 404 问题。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.7

## [v1.2.6] - 2025-12-24
### 修改内容
- 增强 `install.sh` 脚本健壮性：增加对 GitHub API 获取版本号失败的检查。
- 增加下载二进制文件时的错误检测，防止将报错信息误存为可执行文件。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.6

## [v1.2.5] - 2025-12-24
### 修改内容
- 在 `README.md` 中增加了明确的卸载操作说明。
- 优化了 README 中的部分代码块描述。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.5

## [v1.2.4] - 2025-12-24
### 修改内容
- 全局将仓库地址从 `Jrohy/trojan` 替换为 `dujiepeng/trojan`。
- 全局将分支名称从 `master` 替换为 `main`。
- 修复 `install.sh` 中的硬编码 URL，确保安装和更新指向正确的库。
- 更新 Docker 镜像名称为 `dujiepeng/trojan`。
- 更新 README 中的徽章和链接。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.4

## [v1.2.3] - 2025-12-24
### 修改内容
- 更新 `README.md` 中的一键安装脚本指令，指向新的 GitHub 仓库地址 `dujiepeng/trojan`。
- 将安装命令从 `source <(curl -sL ...)` 更改为 `bash <(curl -sL ...)` 格式。

修改人: Antigravity
修改时间: 2025-12-24
修改版本: v1.2.3
